apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-master
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-master
  template:
    metadata:
      labels:
        app: worker-master
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: wait-backend
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup backend-fastapi.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for check backend; sleep 2; done"]
        - name: delete-collection
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', "until curl -X DELETE http://192.168.1.11:30001/vms; do echo waiting for delete vms collection; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_MASTER\", \"ip_address\": \"ws://192.168.1.11:31999\", \"proxy\": \"None\", \"group\": \"view\"}"']
      containers:
      - name: worker-container-master
        image: ondinhk/vm-manager-master:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        - containerPort: 5000
        - containerPort: 80
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/master.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: 'vm_master'
        - name: USERNAME
          value: 'bluethunder77'
        - name: EMAIL
          value: '01234677431k@gmail.com'
        - name: EMAIL_RECOVER
          value: ''
        - name: PASSWORD
          value: '190999khangg@@##'
        - name: HTTP_PROXY
          value: ''
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: GROUP
          value: group_fr
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W1
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-1
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-1
  template:
    metadata:
      labels:
        app: worker-1
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_0\", \"ip_address\": \"ws://192.168.1.11:31000\", \"proxy\": \"None\", \"group\": \"group_fr\"}"']
      containers:
      - name: worker-container-1
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_0"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_fr"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W2
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-2
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-2
  template:
    metadata:
      labels:
        app: worker-2
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_1\", \"ip_address\": \"ws://192.168.1.11:31001\", \"proxy\": \"None\", \"group\": \"group_fr\"}"']
      containers:
      - name: worker-container-2
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_1"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_fr"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W3
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-3
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-3
  template:
    metadata:
      labels:
        app: worker-3
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_2\", \"ip_address\": \"ws://192.168.1.11:31002\", \"proxy\": \"None\", \"group\": \"group_fr\"}"']
      containers:
      - name: worker-container-3
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_2"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_fr"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W4
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-4
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-4
  template:
    metadata:
      labels:
        app: worker-4
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_3\", \"ip_address\": \"ws://192.168.1.11:31003\", \"proxy\": \"None\", \"group\": \"group_fr\"}"']
      containers:
      - name: worker-container-4
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_3"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_fr"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W5
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-5
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-5
  template:
    metadata:
      labels:
        app: worker-5
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_4\", \"ip_address\": \"ws://192.168.1.11:31004\", \"proxy\": \"None\", \"group\": \"group_fr\"}"']
      containers:
      - name: worker-container-5
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_4"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_fr"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W6
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-6
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-6
  template:
    metadata:
      labels:
        app: worker-6
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_5\", \"ip_address\": \"ws://192.168.1.11:31005\", \"proxy\": \"None\", \"group\": \"group_fr\"}"']
      containers:
      - name: worker-container-6
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_5"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_fr"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W7
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-7
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-7
  template:
    metadata:
      labels:
        app: worker-7
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_6\", \"ip_address\": \"ws://192.168.1.11:31006\", \"proxy\": \"None\", \"group\": \"group_nether\"}"']
      containers:
      - name: worker-container-7
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_6"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_nether"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W8
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-8
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-8
  template:
    metadata:
      labels:
        app: worker-8
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_7\", \"ip_address\": \"ws://192.168.1.11:31007\", \"proxy\": \"None\", \"group\": \"group_nether\"}"']
      containers:
      - name: worker-container-8
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_7"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_nether"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W9
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-9
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-9
  template:
    metadata:
      labels:
        app: worker-9
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_8\", \"ip_address\": \"ws://192.168.1.11:31008\", \"proxy\": \"None\", \"group\": \"group_nether\"}"']
      containers:
      - name: worker-container-9
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_8"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_nether"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W10
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-10
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-10
  template:
    metadata:
      labels:
        app: worker-10
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_9\", \"ip_address\": \"ws://192.168.1.11:31009\", \"proxy\": \"None\", \"group\": \"group_nether\"}"']
      containers:
      - name: worker-container-10
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_9"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_nether"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W11
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-11
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-11
  template:
    metadata:
      labels:
        app: worker-11
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_10\", \"ip_address\": \"ws://192.168.1.11:31010\", \"proxy\": \"None\", \"group\": \"group_nether\"}"']
      containers:
      - name: worker-container-11
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_10"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_nether"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W12
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-12
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-12
  template:
    metadata:
      labels:
        app: worker-12
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_11\", \"ip_address\": \"ws://192.168.1.11:31011\", \"proxy\": \"None\", \"group\": \"group_nether\"}"']
      containers:
      - name: worker-container-12
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_11"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_nether"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W13
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-13
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-13
  template:
    metadata:
      labels:
        app: worker-13
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_12\", \"ip_address\": \"ws://192.168.1.11:31012\", \"proxy\": \"None\", \"group\": \"group_rus\"}"']
      containers:
      - name: worker-container-13
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_12"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_rus"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W14
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-14
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-14
  template:
    metadata:
      labels:
        app: worker-14
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_13\", \"ip_address\": \"ws://192.168.1.11:31013\", \"proxy\": \"None\", \"group\": \"group_rus\"}"']
      containers:
      - name: worker-container-14
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_13"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_rus"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W15
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-15
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-15
  template:
    metadata:
      labels:
        app: worker-15
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_14\", \"ip_address\": \"ws://192.168.1.11:31014\", \"proxy\": \"None\", \"group\": \"group_rus\"}"']
      containers:
      - name: worker-container-15
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_14"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_rus"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W16
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-16
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-16
  template:
    metadata:
      labels:
        app: worker-16
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_15\", \"ip_address\": \"ws://192.168.1.11:31015\", \"proxy\": \"None\", \"group\": \"group_rus\"}"']
      containers:
      - name: worker-container-16
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_15"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_rus"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W17
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-17
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-17
  template:
    metadata:
      labels:
        app: worker-17
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_16\", \"ip_address\": \"ws://192.168.1.11:31016\", \"proxy\": \"None\", \"group\": \"group_rus\"}"']
      containers:
      - name: worker-container-17
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_16"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_rus"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W18
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-18
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-18
  template:
    metadata:
      labels:
        app: worker-18
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_17\", \"ip_address\": \"ws://192.168.1.11:31017\", \"proxy\": \"None\", \"group\": \"group_rus\"}"']
      containers:
      - name: worker-container-18
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_17"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_rus"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W19
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-19
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-19
  template:
    metadata:
      labels:
        app: worker-19
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_18\", \"ip_address\": \"ws://192.168.1.11:31018\", \"proxy\": \"None\", \"group\": \"group_sing\"}"']
      containers:
      - name: worker-container-19
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_18"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_sing"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W20
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-20
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-20
  template:
    metadata:
      labels:
        app: worker-20
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_19\", \"ip_address\": \"ws://192.168.1.11:31019\", \"proxy\": \"None\", \"group\": \"group_sing\"}"']
      containers:
      - name: worker-container-20
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_19"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_sing"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W21
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-21
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-21
  template:
    metadata:
      labels:
        app: worker-21
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_20\", \"ip_address\": \"ws://192.168.1.11:31020\", \"proxy\": \"None\", \"group\": \"group_sing\"}"']
      containers:
      - name: worker-container-21
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_20"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_sing"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W22
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-22
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-22
  template:
    metadata:
      labels:
        app: worker-22
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_21\", \"ip_address\": \"ws://192.168.1.11:31021\", \"proxy\": \"None\", \"group\": \"group_sing\"}"']
      containers:
      - name: worker-container-22
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_21"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_sing"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W23
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-23
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-23
  template:
    metadata:
      labels:
        app: worker-23
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_22\", \"ip_address\": \"ws://192.168.1.11:31022\", \"proxy\": \"None\", \"group\": \"group_sing\"}"']
      containers:
      - name: worker-container-23
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_22"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_sing"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W24
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-24
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-24
  template:
    metadata:
      labels:
        app: worker-24
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_23\", \"ip_address\": \"ws://192.168.1.11:31023\", \"proxy\": \"None\", \"group\": \"group_sing\"}"']
      containers:
      - name: worker-container-24
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_23"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_sing"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W25
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-25
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-25
  template:
    metadata:
      labels:
        app: worker-25
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_24\", \"ip_address\": \"ws://192.168.1.11:31024\", \"proxy\": \"None\", \"group\": \"group_uk\"}"']
      containers:
      - name: worker-container-25
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_24"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_uk"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W26
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-26
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-26
  template:
    metadata:
      labels:
        app: worker-26
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_25\", \"ip_address\": \"ws://192.168.1.11:31025\", \"proxy\": \"None\", \"group\": \"group_uk\"}"']
      containers:
      - name: worker-container-26
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_25"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_uk"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W27
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-27
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-27
  template:
    metadata:
      labels:
        app: worker-27
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_26\", \"ip_address\": \"ws://192.168.1.11:31026\", \"proxy\": \"None\", \"group\": \"group_uk\"}"']
      containers:
      - name: worker-container-27
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_26"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_uk"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W28
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-28
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-28
  template:
    metadata:
      labels:
        app: worker-28
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_27\", \"ip_address\": \"ws://192.168.1.11:31027\", \"proxy\": \"None\", \"group\": \"group_uk\"}"']
      containers:
      - name: worker-container-28
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_27"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_uk"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W29
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-29
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-29
  template:
    metadata:
      labels:
        app: worker-29
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_28\", \"ip_address\": \"ws://192.168.1.11:31028\", \"proxy\": \"None\", \"group\": \"group_uk\"}"']
      containers:
      - name: worker-container-29
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_28"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_uk"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W30
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-30
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-30
  template:
    metadata:
      labels:
        app: worker-30
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_29\", \"ip_address\": \"ws://192.168.1.11:31029\", \"proxy\": \"None\", \"group\": \"group_uk\"}"']
      containers:
      - name: worker-container-30
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_29"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_uk"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W31
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-31
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-31
  template:
    metadata:
      labels:
        app: worker-31
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_30\", \"ip_address\": \"ws://192.168.1.11:31030\", \"proxy\": \"None\", \"group\": \"group_us_vir\"}"']
      containers:
      - name: worker-container-31
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_30"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_vir"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W32
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-32
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-32
  template:
    metadata:
      labels:
        app: worker-32
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_31\", \"ip_address\": \"ws://192.168.1.11:31031\", \"proxy\": \"None\", \"group\": \"group_us_vir\"}"']
      containers:
      - name: worker-container-32
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_31"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_vir"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W33
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-33
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-33
  template:
    metadata:
      labels:
        app: worker-33
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_32\", \"ip_address\": \"ws://192.168.1.11:31032\", \"proxy\": \"None\", \"group\": \"group_us_vir\"}"']
      containers:
      - name: worker-container-33
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_32"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_vir"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W34
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-34
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-34
  template:
    metadata:
      labels:
        app: worker-34
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_33\", \"ip_address\": \"ws://192.168.1.11:31033\", \"proxy\": \"None\", \"group\": \"group_us_vir\"}"']
      containers:
      - name: worker-container-34
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_33"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_vir"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W35
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-35
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-35
  template:
    metadata:
      labels:
        app: worker-35
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_34\", \"ip_address\": \"ws://192.168.1.11:31034\", \"proxy\": \"None\", \"group\": \"group_us_vir\"}"']
      containers:
      - name: worker-container-35
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_34"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_vir"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W36
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-36
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-36
  template:
    metadata:
      labels:
        app: worker-36
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_35\", \"ip_address\": \"ws://192.168.1.11:31035\", \"proxy\": \"None\", \"group\": \"group_us_vir\"}"']
      containers:
      - name: worker-container-36
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_35"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_vir"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W37
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-37
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-37
  template:
    metadata:
      labels:
        app: worker-37
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_36\", \"ip_address\": \"ws://192.168.1.11:31036\", \"proxy\": \"None\", \"group\": \"group_us_ore\"}"']
      containers:
      - name: worker-container-37
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_36"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_ore"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W38
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-38
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-38
  template:
    metadata:
      labels:
        app: worker-38
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_37\", \"ip_address\": \"ws://192.168.1.11:31037\", \"proxy\": \"None\", \"group\": \"group_us_ore\"}"']
      containers:
      - name: worker-container-38
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_37"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_ore"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W39
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-39
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-39
  template:
    metadata:
      labels:
        app: worker-39
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_38\", \"ip_address\": \"ws://192.168.1.11:31038\", \"proxy\": \"None\", \"group\": \"group_us_ore\"}"']
      containers:
      - name: worker-container-39
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_38"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_ore"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W40
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-40
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-40
  template:
    metadata:
      labels:
        app: worker-40
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_39\", \"ip_address\": \"ws://192.168.1.11:31039\", \"proxy\": \"None\", \"group\": \"group_us_ore\"}"']
      containers:
      - name: worker-container-40
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_39"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_ore"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W41
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-41
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-41
  template:
    metadata:
      labels:
        app: worker-41
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_40\", \"ip_address\": \"ws://192.168.1.11:31040\", \"proxy\": \"None\", \"group\": \"group_us_ore\"}"']
      containers:
      - name: worker-container-41
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_40"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_ore"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---
# Deployment W42
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker-42
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker-42
  template:
    metadata:
      labels:
        app: worker-42
    spec:
      nodeSelector:
        kubernetes.io/hostname: worker-1
      initContainers:
        - name: init-service
          image: busybox:1.28
          command: ['sh', '-c', "until nslookup worker-master.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for init service; sleep 2; done"]
        - name: init-master
          image: curlimages/curl:8.5.0
          command: ['sh', '-c', 'echo \"sleep 10s\" && sleep 10 && curl -X POST http://192.168.1.11:30001/vms -H "accept: application/json" -H "Content-Type: application/json" -d "{\"name\": \"VM_41\", \"ip_address\": \"ws://192.168.1.11:31041\", \"proxy\": \"None\", \"group\": \"group_us_ore\"}"']
      containers:
      - name: worker-container-42
        image: ondinhk/vm-manager-worker:latest
        #imagePullPolicy: Always
        ports:
        - containerPort: 6081
        resources:
          requests:
            memory: "256Mi"
            cpu: "0.5"
          limits:
            memory: "2048Mi"
            cpu: "4"
        volumeMounts:
        - mountPath: /dev/shm
          name: dshm
        command: ["/bin/sh"]
        args: ["-c", "/startup.sh & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/mouse/client.py & sleep 30 && export DISPLAY=:1 && python /home/ubuntu/code/worker/worker.py"]
        env:
        - name: RESOLUTION
          value: '800x600'
        - name: VM_NAME
          value: "VM_41"
        - name: USERNAME
          value: ""
        - name: EMAIL
          value: ""
        - name: EMAIL_RECOVER
          value: ""
        - name: PASSWORD
          value: ""
        - name: HTTP_PROXY
          value: ""
        - name: GROUP
          value: "group_us_ore"
        - name: MASTER_QUEUE
          value: backend-fastapi.default.svc.cluster.local:6000
        - name: MOUSE_QUEUE
          value: worker-master.default.svc.cluster.local:5000
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
---